<p>search works!</p>
<form [formGroup]="searchForm">
  <div class="flex row wrap">
    <mat-form-field appearance="outline">
      <mat-label>Type de bien</mat-label>
      <mat-select [formControl]="searchForm.controls['estateTypeControl']" multiple>
        <mat-option *ngFor="let type of estateTypeList" [value]="type">{{type}}</mat-option>
      </mat-select>
    </mat-form-field>

    <app-location-control (locationsChanged)="onLocationsChange($event)"></app-location-control>

    <mat-form-field appearance="outline">
      <mat-label>Nb de pièces</mat-label>
      <mat-select [formControl]="searchForm.controls['roomsControl']" multiple (selectionChange)="updateMaxRooms()">
        <mat-option value="1">Studio</mat-option>
        <mat-option value="2">2 pièces</mat-option>
        <mat-option value="3">3 pièces</mat-option>
        <mat-option value="4">4 pièces</mat-option>
        <mat-option value="5">5 pièces et +</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Nb de chambres</mat-label>
      <mat-select [formControl]="searchForm.controls['bedroomsControl']" multiple
        [disabled]="searchForm.controls['roomsControl'].value <= 1">
        <mat-option value="1">1 chambre</mat-option>
        <mat-option value="2" [disabled]="maxRooms <= 2">2 chambres</mat-option>
        <mat-option value="3" [disabled]="maxRooms <= 3">3 chambres</mat-option>
        <mat-option value="4" [disabled]="maxRooms <= 4">4 chambres et +</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-accordion>
      <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Surface
          </mat-panel-title>
          <mat-panel-description *ngIf="minIntSurface != floorIntSurface || maxIntSurface != ceilIntSurface || maxExtSurface != floorExtSurface">
            Intérieur : {{maxIntSurface | intSurfaceSlider:ceilIntSurface:minIntSurface:floorIntSurface}} / Extérieur : {{maxExtSurface | extSurfaceSlider:ceilExtSurface:floorExtSurface}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <span>
          <mat-label>Surface intérieure : </mat-label>
          <mat-label class="mat-body-2">{{maxIntSurface | intSurfaceSlider:ceilIntSurface:minIntSurface:floorIntSurface}}</mat-label>
        </span>
        <ngx-slider formControlName="insideSurfaceControl" [options]="insideSliderOptions" [(value)]="minIntSurface" [(highValue)]="maxIntSurface"></ngx-slider>
        <span>
          <mat-label>Surface extérieure (balcon, terrasse, jardin...) : </mat-label>
          <mat-label class="mat-body-2">{{maxExtSurface | extSurfaceSlider:ceilExtSurface:floorExtSurface}}</mat-label>
        </span>
        <ngx-slider formControlName="outsideSurfaceControl" [options]="outsideSliderOptions" [(value)]="maxExtSurface"></ngx-slider>
      </mat-expansion-panel>
    </mat-accordion>

    <mat-accordion>
      <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Budget
          </mat-panel-title>
          <mat-panel-description>
            <ng-container *ngIf="(minBudget == floorBudget && maxBudget == ceilBudget); else budgetDescriptionTemplate">
              <mat-label>{{maxBudget | currency:'EUR':'':'1.0-0':'fr-FR'}}€ et +</mat-label>
            </ng-container>
            <ng-template #budgetDescriptionTemplate>
              <span>
                <mat-label *ngIf="minBudget > floorBudget">min : {{minBudget | currency:'EUR':'':'1.0-0':'fr-FR'}}€</mat-label>
                <mat-label *ngIf="minBudget > floorBudget && maxBudget < ceilBudget" class="space">/</mat-label>
                <mat-label *ngIf="maxBudget < ceilBudget">max : {{maxBudget | currency:'EUR':'':'1.0-0':'fr-FR'}}€</mat-label>
              </span>
            </ng-template>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <ngx-slider formControlName="budgetControl" [options]="budgetSliderOptions" [(value)]="minBudget" [(highValue)]="maxBudget"></ngx-slider>
      </mat-expansion-panel>
    </mat-accordion>


  </div>

</form>
